<?php  require_once 'bootstrap.php';    if (checkAdminAndRedirectIfNot())  {    if (checkId($_GET))    {      if (checkProjectData($_POST))      {        mysqli_multi_query($link,          'UPDATE projects SET 		  			name="'.addslashes($_POST['name']).'",			description="'.addslashes($_POST['description']).'",			requestedFunds="'.addslashes($_POST['requestedFunds']).'",			period="'.addslashes($_POST['period']).'" 			            WHERE id='.$_GET['id'].';           DELETE FROM updates WHERE rowId = '.((int)$_GET['id']).';                       INSERT INTO updates (tableName, operation, rowId) VALUES ("projects", "edit", "'. $_GET['id'] .'")');          header('location:'.$_SESSION['httpReferer']);      }      else      {        $param['title']='Проекты - редактирование';        if ($formParams = getRecord($_GET['id'],'projects'))        {            $formParams['Method']='POST';            $formParams['SubmitTitle']='Сохранить';            $formParams['ShowCancel']=TRUE;            $formParams['FormTitle']='Проекты - редактирование';            $fieldParams = array(                "name" => array(                    "Название" => $formParams['name']                ),                "description" => array(                    "Описание" => $formParams['description']                ),                "requestedFunds" => array(                    "Требуется средств" => $formParams['requestedFunds']                ),                "period" => array(                    "Период кампании" => $formParams['period']                )            );            $param['content'] = getForm($formParams, $fieldParams);        }        else        {          $param['content']='Нет записи с id='.$_GET['id'];        }        template($param);      }    }    else    {      goBack();    }  }